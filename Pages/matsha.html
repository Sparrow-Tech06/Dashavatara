<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Article Page</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

  <!-- Article Image preload -->
  <link rel="preload" href="../Assets/Matsha.png" as="image">
  
  <style>
     *{
       margin:0;
       padding: 0;
       box-sizing:border-box;
       user-select:none;
      }
   :root {
       --primary-color:  #ff3b6e ; /*  #198754; */
       --background: #fffde7;
       --text-color: #000;
       --box-color : #fff;
       --success: /* #198754; */ #ff3b6e ;
       --secondary: #6c757d;
       --overlay : #ffffff;
     }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--background);
    }
    .progress-bar {
      background-color: var(--primary-color) ;
    }
    /* Skeleton Loader */
    .skeleton {
      width: 100%;
      max-height: 160px;
      height: 160px;
      border-radius: 10px;
      background: linear-gradient(135deg, #e0e0e0 25%, #f0f0f0 50%, #e0e0e0 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    .article-img {
      width: 100%;
      max-height: 160px;
      height: 160px;
      object-fit: cover;
      border-radius: 10px;
      display: none; /* hidden until loaded */
    }
    .article-box {
      background: var(--box-color) ;
      color: var(--text-color) ;
      padding: 20px 10px;
      border-radius: 12px;
      margin-top: 20px;
      height: 320px; /* Fixed height */
      position: relative;
    }
    .article-part {
      height: calc(100% - 60px); /* buttons ke liye space */
      overflow: auto;
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      position: absolute;
      width: calc(100% - 40px);
    }
    .article-part.active {
      opacity: 1;
    }
    .nav-btns {
      position: absolute;
      bottom: 15px;
      left: 20px;
      right: 20px;
      display: flex;
      justify-content: space-between;
    }
    .btn-custom-prev {
      background-color:var(--secondary) ;
      color: white;
      border-radius: 8px;
    }
    .btn-custom-next {
      background-color: var(--success) ;
      color: white;
      border-radius: 8px;
    }
    .btn-custom-next:hover {
      background-color: var(--success) ;
      color: white;
      border-radius: 8px;
    }
    .btn-custom-prev:disabled,
    .btn-custom-next:disabled {
      opacity: 0.4;
    }
    .congrats-img {
      width: 110px;
      margin: 10px auto;
      display: block;
      border-radius:50%;
      border: 3px solid var(--primary-color) ;
      padding:4px;
    }
    .success {
       background-color: var(--success) ;
       color:#fff;
    }
    .secondary {
       background-color: var(--secondary) ;
       color:#fff;
    }
    .modal-content {
       background-color: var(--overlay) ;
    }
  </style>
</head>
<body>

<div class="container py-4">
  <!-- Skeleton Loader -->
  <div id="imgSkeleton" class="skeleton"></div>
  <!-- Article Image -->
  <img id="articleImg" src="../Assets/Matsha.png" alt="Article Image" class="article-img" draggable="false">

  <!-- Progress Bar -->
  <div class="progress mt-3" style="height: 10px;">
    <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%;"></div>
  </div>

  <!-- Article Content -->
  <div class="article-box mt-3">
    <!-- Parts -->
    <div id="part1" class="article-part active">
      <h4>About Taj Mahal</h4>
      <p>The Taj Mahal is one of the most beautiful monuments in the world, located in Agra, India. It was commissioned by Mughal emperor Shah Jahan in memory of his beloved wife Mumtaz Mahal.</p>
    </div>

    <div id="part2" class="article-part">
      <h4>Architecture</h4>
      <p>The Taj Mahal is made of white marble and is considered one of the finest examples of Mughal architecture. It combines Islamic, Persian, Ottoman Turkish, and Indian architectural styles.</p>
    </div>

    <div id="part3" class="article-part">
      <h4>Heritage</h4>
      <p>It is recognized as a UNESCO World Heritage Site and attracts millions of tourists every year. The Taj Mahal is also one of the New Seven Wonders of the World.</p>
    </div>
    
    <div id="part4" class="article-part">
      <h4> The End </h4>
   </div>

    <!-- Navigation Buttons -->
    <div class="nav-btns">
      <button id="prevBtn" class="btn btn-custom-prev" disabled>
        <i class="bi bi-arrow-left-circle"></i> Previous
      </button>
      <button id="nextBtn" class="btn btn-custom-next">
        Next <i class="bi bi-arrow-right-circle"></i>
      </button>
    </div>
  </div>
</div>

<!-- Congratulations Modal -->
<div class="modal fade" id="congratsModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <img src="https://cdn-icons-png.flaticon.com/512/4319/4319104.png" alt="Congrats" class="congrats-img">
      <h3 class="text-success"><i class="bi bi-trophy-fill"></i> Congratulations!</h3>
      <p class="mt-2">üéâ You have completed reading the full article üéâ</p>
      <div class="d-flex justify-content-center gap-3 mt-3">
        <a href="index.html" class="btn secondary">üè† Back to Home</a>
        <button type="button" class="btn success" data-bs-dismiss="modal">Continue</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const parts = document.querySelectorAll('.article-part');
  let currentPart = 0;

  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const progressBar = document.getElementById('progressBar');
  const congratsModalEl = document.getElementById('congratsModal');
  const congratsModal = new bootstrap.Modal(congratsModalEl);

  function showPart(index) {
    // Hide current part with animation
    parts[currentPart].classList.remove('active');
    
    setTimeout(() => {
      // Hide all parts
      parts.forEach(part => {
        part.classList.remove('active');
      });
      
      // Show new part
      parts[index].classList.add('active');
      currentPart = index;

      prevBtn.disabled = index === 0;
      nextBtn.disabled = index === parts.length - 1;

      let progress = ((index + 1) / parts.length) * 100;
      progressBar.style.width = progress + "%";

      // Show popup when last part is reached
      if (index === parts.length - 1) {
        setTimeout(() => {
          congratsModal.show();
        }, 500);
      }
    }, 150); // Wait for fade out before switching content
  }

  prevBtn.addEventListener('click', () => {
    if (currentPart > 0) {
      showPart(currentPart - 1);
    }
  });

  nextBtn.addEventListener('click', () => {
    if (currentPart < parts.length - 1) {
      showPart(currentPart + 1);
    }
  });

  // Reset to first part when modal is closed
  congratsModalEl.addEventListener('hidden.bs.modal', function() {
    showPart(0);
  });

  // Image loader
  const img = document.getElementById("articleImg");
  const skeleton = document.getElementById("imgSkeleton");
  img.onload = function() {
    skeleton.style.display = "none";
    img.style.display = "block";
  };

  // Initialize
  showPart(currentPart);
</script>

</body>
</html>
